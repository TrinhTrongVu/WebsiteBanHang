CREATE DATABASE java5
USE java5
GO
CREATE TABLE TaiKhoan(
	Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	TenDangNhap VARCHAR(25) DEFAULT NULL,
	MatKhau NVARCHAR(25) DEFAULT NULL,
	HoTen NVARCHAR(50) DEFAULT NULL,
	Email NVARCHAR(50) UNIQUE DEFAULT NULL,
	Anh NVARCHAR(50) DEFAULT NULL,
	TrangThai int DEFAULT 0,
	Admins int DEFAULT 0
)


GO
CREATE TABLE HoaDon(
	Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	IdTK UNIQUEIDENTIFIER,
	NguoiNhan NVARCHAR(50) NULL,
	Email NVARCHAR(50) NULL,
	NgayThanhToan DATE DEFAULT NULL,
	SDT VARCHAR(10) DEFAULT NULL,
	DiaChi NVARCHAR(250) DEFAULT NULL,
	TrangThai INT DEFAULT 0,
)

GO
CREATE TABLE HoaDonChiTiet(
	Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	IdHD UNIQUEIDENTIFIER,
	IdSP UNIQUEIDENTIFIER,
	Gia DECIMAL(20,0) DEFAULT 0,
	SoLuong INT
)



GO
CREATE TABLE SanPham(
	Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	IdDongSP UNIQUEIDENTIFIER,
	Ma VARCHAR(25) DEFAULT NULL,
	Ten NVARCHAR(100) DEFAULT NULL,
	Anh NVARCHAR(100) DEFAULT NULL,
	Gia DECIMAL(20,0) DEFAULT 0,
	NgayTao DATE DEFAULT NULL,
	TrangThai INT DEFAULT 0,
)

GO
CREATE TABLE DongSP(
	Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	Ten NVARCHAR(100) DEFAULT NULL
)


-- HoaDon - TaiKhoan
ALTER TABLE HoaDon ADD FOREIGN KEY(IdTK) REFERENCES TaiKhoan(Id)

-- HoaDonChiTiet - HoaDon
ALTER TABLE HoaDonChiTiet ADD FOREIGN KEY(IdHD) REFERENCES HoaDon(Id)

-- HoaDonChiTiet - SanPham
ALTER TABLE HoaDonChiTiet ADD FOREIGN KEY(IdSP) REFERENCES SanPham(Id)

-- SanPham - DongSP
ALTER TABLE SanPham ADD FOREIGN KEY(IdDongSP) REFERENCES DongSP(Id)
